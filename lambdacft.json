{
    "AWSTemplateFormatVersion" : "2010-09-09",
    "Description": "Creating Lambda",
    "Resources": {
        "MyLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
                "Handler": "index.handler",
                "Role": "arn:aws:iam::336042853191:role/LambdaRds",
                "FunctionName": "AniCFT",
                "Code": {
                    "ZipFile": {
                        "Fn::Join": [
                            "\n",
                            [
                                "import sys",
                                "import pymysql",
                                "rds_host  = 'coconut45.cwrixhug44og.us-east-1.rds.amazonaws.com' ",
                                "username = 'pikachu123'",
                                "password = 'pikachu123'",
                                "db_name = 'aniruddha'",
                                "table_name= 'TestTable'",
                                "def save_events(event):",
                                "\tconn = pymysql.connect(rds_host, user=username, passwd=password, db=db_name, connect_timeout=5)",
                                "\tcursor = conn.cursor()",
                                "\tcursor.execute('create database db_name')",
                                "\tcursor.execute('use db_name')",
                                "\tcursor.execute('DROP TABLE IF table_name')",
                                "\tsql = '''CREATE TABLE table_name (FIRST_NAME  CHAR(20) NOT NULL,LAST_NAME  CHAR(20),AGE INT,SEX CHAR(1),INCOME FLOAT )'''",
                                "\tcursor.execute(sql)",
                                "\tconn.commit()",
                                "def lambda_handler(event, context):",
                                "\tsave_events(event)"
                            ]
                        ]
                    }
                },
                "Runtime": "python3.6",
                "Timeout": "25"
            }
        }
    }
}
